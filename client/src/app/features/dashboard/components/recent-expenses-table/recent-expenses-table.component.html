<p-card>
  <div class="flex justify-between">
    <h1 class="text-2xl font-bold mb-8">Recent Expenses</h1>
    <app-create-expense-dialog (expenseCreated)="refreshData()" />
  </div>
  @if (expenses && !isLoading) {
  <p-table [value]="expenses" [tableStyle]="{ 'min-width': '50rem' }">
    <ng-template #header>
      <tr>
        <th>#</th>
        <th>Name</th>
        <th>Date</th>
        <th>Category</th>
        <th>Amount</th>
        <th>Details</th>
      </tr>
    </ng-template>
    <ng-template #body let-expense>
      <tr>
        <td>{{ expense.id }}</td>
        <td>{{ expense.name }}</td>
        <td>{{ expense.date | date : "longDate" }}</td>
        <td>
          @if (categories$ | async; as categories) { @if
          (getCategoryDisplay(expense.category, categories); as cat) {
          <p-tag
            [value]="cat.name"
            [style]="{
              'background-color': cat.color,
              color: '#fff',
              'border-radius': '20px',
              'font-weight': 'normal',
              padding: '4px 12px'
            }"
          ></p-tag>
          } }
        </td>
        <td class="price">
          {{ expense.amount | formatCurrency : expense.currency }}
        </td>
        <td>
          <a
            routerLink="/expenses/{{ expense.id }}"
            class="px-[12px] py-[4px] bg-blue-600 rounded-full text-white hover:cursor-pointer"
            >Details</a
          >
        </td>
      </tr>
    </ng-template>
  </p-table>
  } @else if (isLoading) {
  <div class="flex justify-center items-center">
    <app-loader />
  </div>
  } @else {
  <p class="text-md text-gray-400 text-center">
    Seems you don't have any expenses yet... Add some now!
  </p>
  }
</p-card>
